Feature: Testeo UI con Karate

  Scenario: Prueba que consiste en crear una seeccion y un evento de esa sección. Después, loguea en otro usuario, ingresa y apuesta ese dinero en el evento creado
    Given driver baseUrl + '/login'

    * click('#debugButtonA')
    # Se va a la parte de Admin-Secciones y se crea la sección
    * click('#enlaceNavAdmin')
    * click('#menuAdminSecciones')
    # Se accede a la vista de crearSeccion
    * click('#botonCrearSeccion')
    * driver 'http://localhost:8080/admin/secciones-crearSeccion'
    * delay(300)
    And input('#inputNombreSeccion', 'seccionPrueba')
    And input('#inputTipoSeccion', 'aTipoSeccionPrueba')
    * delay(300)
    * driver.inputFile('#inputImagenSecciones', '1.jpg')
    * delay(500)
    # Se añaden dos variables
    * click('#botonCrearVariable')
    * delay(300)
    And input('#inputnombreVarNueva', 'variableP')
    * delay(500)
    And select('#selectTipoVarNueva', 1)
    * delay(500)
    * click('#botonAnhadirVariableSeccion')
    * delay(300)
    * click('#botonCrearVariable')
    * delay(300)
    And input('#inputnombreVarNueva', 'variablePrueba2')
    * delay(500)
    And select('#selectTipoVarNueva', 2)
    * delay(500)
    * click('#botonAnhadirVariableSeccion')
    * delay(500)
    * click('#botonDefinitivoCrearSeccion')
    * delay(1000)

    # Se va a la parte de eventos y se crea el evento
    * click('#menuAdminEventos')
    * delay(300)
    * click('#botonCrearEvento')
    * delay(300)
    And input('#inputNombreEvento', 'EventoPrueba')
    * delay(500)
    * script("document.querySelector('#seccionSelect').value = '975'")
    * script("document.querySelector('#seccionSelect').dispatchEvent(new Event('change'))")
    * delay(300)
    * click('#textoFechaModal')
    * delay(500)
    * clear('#datepicker')
    And input('#datepicker', '2025-12-12')
    * delay(500)
    * click('#botonEtiquetas')
    * click('#inputEtiqueta')
    * delay(500)
    And input('#inputEtiqueta' , 'etiquetaPrueba')
    * delay(300)
    * script("document.querySelector('#inputEtiqueta').dispatchEvent(new KeyboardEvent('keydown', {key: 'Enter'}))")
    * delay(500)
    * click('#botonVariables')
    * delay(500)
    * click('#submit-form-eventos')
    * delay(000)

    # Se loguea en otro usuario no admin y se ingresa dinero
    * click('#usuarioNav')
    * delay(300)
    * click('#botonNavCerrarSesion')
    * click('#debugButtonB')
    * delay(300)
    * click('#enlaceNavCartera')
    * delay(1000)
    * click('#botonEnlaceIngresar')
    * delay(300)
    And input('#ingresoDineroInput', '12')
    * delay(300)
    * click('#botonConfirmarIngreso')
    * delay(500)
    # Se usa ese dinero para apostar en el evento creado
    * click('#enlaceNavTodosEventos')
    * delay(300)
    * click('#verMasEventos')
    * delay(300)
    * click('#contenedorEvento-1075')
    * delay(300)
    * click('#boton-crear-formula-reducido')
    * delay(300)
    And input('#tituloModal', 'Formula Prueba')
    * delay(500)
    And input('#formulaModal', 'variableP > 2')
    * delay(500)
    * click('#botonSiguienteCrearApuesta')
    * delay(500)
    And input('#cantidadModal', '12')
    * delay(500)
    * click('#botonCrearApuestaDefinitiva')
    * delay(2000)